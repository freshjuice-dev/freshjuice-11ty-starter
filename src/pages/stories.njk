---
layout: layouts/base.njk
title: "Customer Stories"
description: "See how our customers achieved success with our solutions."
heading: "Customer Stories"
subheading: "Discover how businesses like yours achieved remarkable results."
pagination:
  data: collections.stories
  size: 6
  alias: stories
permalink: /stories/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}
---
{% from "_components/index.njk" import badge %}

<section class="py-16 lg:py-24">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-stone-900 mb-4 editable" data-editable="heading">{{ heading }}</h1>
      <p class="text-xl text-stone-600 max-w-2xl mx-auto editable" data-editable="subheading">{{ subheading }}</p>
    </div>

    {% if stories | length %}
    <div class="max-w-6xl mx-auto grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {% for story in stories %}
      <a href="{{ story.url }}" class="group flex flex-col bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden hover:shadow-lg hover:border-primary-300 transition-all duration-300">
        {# Featured Image #}
        {% if story.data.image %}
        <div class="aspect-video overflow-hidden bg-stone-100">
          <img src="{{ story.data.image }}" alt="{{ story.data.image_alt or story.data.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" loading="lazy">
        </div>
        {% endif %}

        <div class="flex flex-col flex-1 p-6">
          {# Top Section - Badge, Title, Description (grows to push bottom content down) #}
          <div class="flex-1">
            {# Industry Badge #}
            {% if story.data.industry %}
            <div class="mb-3">
              {{ badge({ text: story.data.industry, variant: "secondary" }) }}
            </div>
            {% endif %}

            {# Title #}
            <h2 class="text-xl font-bold text-stone-900 mb-2 group-hover:text-primary-600 transition-colors">
              {{ story.data.title }}
            </h2>

            {# Description #}
            {% if story.data.description %}
            <p class="text-stone-600 text-sm line-clamp-2">{{ story.data.description }}</p>
            {% endif %}
          </div>

          {# Bottom Section - Company Info & Metrics (always at bottom) #}
          <div class="mt-4">
            {# Company Info #}
            <div class="flex items-center gap-3 pt-4 border-t border-stone-100">
              {% if story.data.logo %}
              <img src="{{ story.data.logo }}" alt="{{ story.data.company }} logo" class="h-8 w-auto object-contain">
              {% endif %}
              {% if story.data.company %}
              <span class="text-sm font-medium text-stone-700">{{ story.data.company }}</span>
              {% endif %}
            </div>

            {# Metrics Preview (first 2) #}
            {% if story.data.metrics and story.data.metrics.length %}
            <div class="grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-stone-100">
              {% for metric in story.data.metrics | limit(2) %}
              <div class="text-center">
                <div class="text-lg font-bold text-primary-700">{{ metric.value }}</div>
                <div class="text-xs text-stone-600">{{ metric.label }}</div>
              </div>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </div>
      </a>
      {% endfor %}
    </div>

    {# Pagination Navigation #}
    {% if pagination.pages | length > 1 %}
    <nav class="mt-12 flex items-center justify-center gap-2" aria-label="Stories pagination">
      {# Previous Button #}
      {% if pagination.href.previous %}
      <a href="{{ pagination.href.previous }}" class="pager pager--link">
        {% phosphor "caret-left", "bold", { size: 18 } %}
        <span class="sr-only">Previous</span>
      </a>
      {% else %}
      <span class="pager pager--disabled">
        {% phosphor "caret-left", "bold", { size: 18 } %}
        <span class="sr-only">Previous</span>
      </span>
      {% endif %}

      {# Page Numbers #}
      {% set totalPages = pagination.pages | length %}
      {% set currentPage = pagination.pageNumber + 1 %}
      {% set showLeftEllipsis = currentPage > 4 %}
      {% set showRightEllipsis = (totalPages - currentPage) > 3 %}
      {% set lastShown = { value: 0 } %}

      {% for pageEntry in pagination.pages %}
        {% set pageNum = loop.index %}
        {% set pageUrl = pagination.hrefs[loop.index0] %}
        {% set isFirst = (pageNum == 1) %}
        {% set isLast = (pageNum == totalPages) %}
        {% set nearCurrent = (pageNum >= currentPage - 1) and (pageNum <= currentPage + 1) %}
        {% set inLeftEdge = (pageNum <= 3) and (not showLeftEllipsis) %}
        {% set inRightEdge = (pageNum >= totalPages - 2) and (not showRightEllipsis) %}
        {% set shouldShow = isFirst or isLast or nearCurrent or inLeftEdge or inRightEdge %}

        {% if shouldShow %}
          {% if lastShown.value > 0 and (pageNum - lastShown.value) > 1 %}
          <span class="pager pager--ellipsis">...</span>
          {% endif %}

          {% if pageNum == currentPage %}
          <span class="pager pager--current">{{ pageNum }}</span>
          {% else %}
          <a href="{{ pageUrl }}" class="pager pager--link">{{ pageNum }}</a>
          {% endif %}

          {% set lastShown = { value: pageNum } %}
        {% endif %}
      {% endfor %}

      {# Next Button #}
      {% if pagination.href.next %}
      <a href="{{ pagination.href.next }}" class="pager pager--link">
        <span class="sr-only">Next</span>
        {% phosphor "caret-right", "bold", { size: 18 } %}
      </a>
      {% else %}
      <span class="pager pager--disabled">
        <span class="sr-only">Next</span>
        {% phosphor "caret-right", "bold", { size: 18 } %}
      </span>
      {% endif %}
    </nav>
    {% endif %}

    {% else %}
    <div class="text-center py-12">
      <p class="text-stone-600">No customer stories yet. Check back soon!</p>
    </div>
    {% endif %}
  </div>
</section>
